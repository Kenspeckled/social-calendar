doctype html
html
  head
    meta charset="UTF-8" /
    meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" /
    meta content="width=device-width, initial-scale=1.0" name="viewport" /
    title Flexible Calendar
    meta content=("Flexible Calendar with jQuery and CSS3") name="description" /
    meta content="responsive, calendar, jquery, plugin, full page, flexible, javascript, css3, media queries" name="keywords" /
    meta content="Codrops" name="author" /
    link href="../favicon.ico" rel=("shortcut icon") /
    link href="css/calendar.css" rel="stylesheet" type="text/css" /
    link href="css/custom_2.css" rel="stylesheet" type="text/css" /
    script src="js/modernizr.custom.63321.js"
  body
    .container
      /! Codrops top bar
      header.clearfix
        h1
          | Social Calendar
      section.main
        .custom-calendar-wrap
          #custom-inner.custom-inner
            .custom-header.clearfix
              nav
                span#custom-prev.custom-prev
                span#custom-next.custom-next
              h2#custom-month.custom-month
              h3#custom-year.custom-year
            #calendar.fc-calendar-container
    /! /container
    script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js" type="text/javascript"
    script src="js/jquery.calendario.js" type="text/javascript"
    script src="js/data.js" type="text/javascript"
    javascript:
      $(function() {

        var transEndEventNames = {
            'WebkitTransition' : 'webkitTransitionEnd',
            'MozTransition' : 'transitionend',
            'OTransition' : 'oTransitionEnd',
            'msTransition' : 'MSTransitionEnd',
            'transition' : 'transitionend'
          },
          transEndEventName = transEndEventNames[ Modernizr.prefixed( 'transition' ) ],
          $wrapper = $( '#custom-inner' ),
          $calendar = $( '#calendar' ),
          cal = $calendar.calendario( {
            onDayClick : function( $el, $contentEl, dateProperties ) {

              if( $contentEl.length > 0 ) {
                showEvents( $contentEl, dateProperties );
              }

            },
            caldata : codropsEvents,
            displayWeekAbbr : true
          } ),
          $month = $( '#custom-month' ).html( cal.getMonthName() ),
          $year = $( '#custom-year' ).html( cal.getYear() );

        $( '#custom-next' ).on( 'click', function() {
          cal.gotoNextMonth( updateMonthYear );
        } );
        $( '#custom-prev' ).on( 'click', function() {
          cal.gotoPreviousMonth( updateMonthYear );
        } );

        function updateMonthYear() {
          $month.html( cal.getMonthName() );
          $year.html( cal.getYear() );
        }


        function showEvents( $contentEl, dateProperties ) {

          hideEvents();

          var $events = $( '<div id="custom-content-reveal" class="custom-content-reveal"><h4>Events for ' + dateProperties.monthname + ' ' + dateProperties.day + ', ' + dateProperties.year + '</h4></div>' ),
            $close = $( '<span class="custom-content-close"></span>' ).on( 'click', hideEvents );

          $events.append( $contentEl.html() , $close ).insertAfter( $wrapper );

          setTimeout( function() {
            $events.css( 'top', '0%' );
          }, 25 );

        }
        function hideEvents() {

          var $events = $( '#custom-content-reveal' );
          if( $events.length > 0 ) {

            $events.css( 'top', '100%' );
            Modernizr.csstransitions ? $events.on( transEndEventName, function() { $( this ).remove(); } ) : $events.remove();

          }

        }

      });
